(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[0],{113:function(e,a,n){},114:function(e,a,n){},211:function(e,a,n){"use strict";n.r(a);var t=n(0),i=n.n(t),s=n(22),c=n.n(s),o=(n(113),n(105)),d=n(104),r=(n(114),n(92)),l=n.n(r),_=n(68),u=n(214),m=(n(135),n(24)),v=function(e){var a;console.log("props.data_storage",e.data_storage);var n=null===(a=e.data_storage)||void 0===a?void 0:a.map((function(e){return{key:e.centre_details.sessions[e.session_array_index].session_id,centre_name:e.centre_details.name,address:e.centre_details.address,vaccine:e.centre_details.sessions[e.session_array_index].vaccine,date:e.centre_details.sessions[e.session_array_index].date,availability_dose_1:e.centre_details.sessions[e.session_array_index].available_capacity_dose1,availability_dose_2:e.centre_details.sessions[e.session_array_index].available_capacity_dose2}}));return Object(m.jsxs)("div",{children:[Object(m.jsx)(u.a,{dataSource:n,columns:[{title:"Centre Name",dataIndex:"centre_name",key:"centre_name"},{title:"Address",dataIndex:"address",key:"address"},{title:"Vaccine",dataIndex:"vaccine",key:"vaccine"},{title:"Date",dataIndex:"date",key:"date"},{title:"availability dose 1",dataIndex:"availability_dose_1",key:"availability_dose_1"},{title:"availability dose 2",dataIndex:"availability_dose_2",key:"availability_dose_2"}]}),";"]})};var b=function(){var e=Object(t.useState)([]),a=Object(d.a)(e,2),n=a[0],i=a[1],s=[];Object(t.useEffect)((function(){console.log("in useeffect"),r()}),[]);var c=function(e){console.log("in sendMail");var a={from_name:"saisoumith1818@gmail.com",to_name:"saisoumith1818@gmail.com",subject:"COVID VACCINATION",message:"Hi vaccination opened for centre with name ".concat(e.name)},n={from_name:"saisoumith1818@gmail.com",to_name:"bbhavana16@gmail.com",subject:"COVID VACCINATION",message:"Hi vaccination opened for centre with name  ".concat(e.name)};_.send("service_fzf7a84","template_2x34oci",a,"user_tsNRFZzd0abE658TBfDyY"),_.send("service_fzf7a84","template_2x34oci",n,"user_tsNRFZzd0abE658TBfDyY")},r=function e(){l.a.get("https://cdn-api.co-vin.in/api/v2/appointment/sessions/public/calendarByDistrict?district_id=581&date=27-05-2021").then((function(e){console.log("in then"),console.log("response.data",e.data),function(e){if(e){var a,n=e.centers;for(a=0;a<n.length;a++){var t,d=n[a];for(t=0;t<d.sessions.length;t++){var r=d.sessions[t];45===r.min_age_limit&&"COVISHIELD"===r.vaccine&&r.available_capacity_dose2>0&&!s.includes(r.session_id)&&(console.log("individual centre obj struc",d),i((function(e){return[].concat(Object(o.a)(e),[{centre_details:d,session_array_index:t}])})),s.push(r.session_id),c(d),alert("found centre ".concat(d.name)))}}}}(e.data)})).catch((function(){console.log(console)})),console.log("calling api again"),setTimeout(e,1e4)};return Object(m.jsxs)("div",{className:"App",children:[Object(m.jsx)("div",{className:"heading",children:"Soumith's Vaccination Alert Pushing Dashboard"}),Object(m.jsx)(v,{data_storage:n})]})},f=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,215)).then((function(a){var n=a.getCLS,t=a.getFID,i=a.getFCP,s=a.getLCP,c=a.getTTFB;n(e),t(e),i(e),s(e),c(e)}))};c.a.render(Object(m.jsx)(i.a.StrictMode,{children:Object(m.jsx)(b,{})}),document.getElementById("root")),f()}},[[211,1,2]]]);
//# sourceMappingURL=main.e016e4fb.chunk.js.map